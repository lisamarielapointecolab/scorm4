"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[4720],{45577:(e,i,t)=>{t.d(i,{q:()=>a});var l=t(45992),n=t(17588),d=t(66264),s=t(60708),o=t(75386),r=t(5441);const a=e=>{let{getItems:i,item:t,menuType:a,theme:u,shouldCloseWhenClickOutside:c=!1,itemSize:m,menuTheme:v}=e;const[g,f]=(0,n.useState)(i()),[h,p]=(0,n.useState)(!1),S=(0,n.useCallback)((()=>{p((e=>!e))}),[]);(0,n.useEffect)((()=>{const e=null===t||void 0===t?void 0:t.on(d.q.Message,(e=>{e===s.m.Entering&&(f(i()),p(!1))}));return()=>{null===e||void 0===e||e()}}),[i,t]);const T=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const l=i=>{t.current&&!t.current.contains(i.target)&&e(i)};return document.addEventListener("mouseup",l,i),document.addEventListener("touchend",l,i),()=>{document.removeEventListener("mouseup",l,i),document.removeEventListener("touchend",l,i)}}),[t,e,i]),t}((0,n.useCallback)((()=>{c&&h&&p(!1)}),[h,c]),!0);(0,n.useEffect)((()=>{f(i())}),[i]);const y=(0,o.CO)(a);return(0,r.T)({theme:u,children:(0,l.jsx)(y,{items:g,onToggleClick:S,opened:h,ref:T,theme:u,itemSize:m,menuTheme:v})})}},84720:(e,i,t)=>{t.r(i),t.d(i,{geniallyMenuEditorScript:()=>v});var l=t(45992),n=t(57277),d=t(45577);var s,o=t(89035),r=t(54769);!function(e){e[e.MD=380]="MD"}(s||(s={}));const a=function(e,i){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var l;if(!e||!e.exists)return;const n=e,{menuType:d}=i;if(t){if(d===r.L.Horizontal){const e=(e=>{switch(e){case r.L.Horizontal:return{minWidth:s.MD,maxWidth:void 0};case r.L.Hamburger:return{minWidth:o.N_.width,maxWidth:s.MD};default:return{minWidth:void 0,maxWidth:void 0}}})(d),i=n.parentSlide.size.width-24,t=Math.max(null!==(l=e.minWidth)&&void 0!==l?l:0,i);n.setSize(t,o.cE.height),n.setPosition((n.parentSlide.size.width-t)/2,n.y)}d===r.L.Hamburger&&n.setSize(o.N_.width,o.N_.height)}};var u=t(15938),c=t(75386);var m=t(93918);const v=e=>{let{script:i,editor:t}=e;t.justCreatedFromSidebar&&(e=>{let{editor:i,script:t}=e;0===t.getConfig().slidesToDisplay.selectedSlides.length&&t.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=i.getSlides().map((e=>e.id))}))})({editor:t,script:i}),t.on("slideCreated",(e=>{let{slide:t}=e;((e,i)=>{if(!1===e.getConfig().slidesToDisplay.allSlidesSelected){const t=e.item;t.excludedSlidesIds=[...t.excludedSlidesIds,i.id]}})(i,t)})),t.on("slideDeleted",(e=>{let{slide:l}=e;((e,i)=>{1===e.getSlides().length&&i.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected=!0,e.slidesToDisplay.selectedSlides=[]}))})(t,i),((e,i)=>{const{allSlidesSelected:t,selectedSlides:l}=e.getConfig().slidesToDisplay;if(!t)if(null===l||void 0===l?void 0:l.includes(i.id))e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=e.slidesToDisplay.selectedSlides.filter((e=>e!==i.id))}));else{const t=e.item;t.excludedSlidesIds=t.excludedSlidesIds.filter((e=>e!==i.id))}})(i,l)})),i.on("configChange",(e=>{let{config:l,prevConfig:n}=e;const d=i.item;d&&(l.menuType!==(null===n||void 0===n?void 0:n.menuType)&&(e=>{let{item:i,config:t}=e;if(!i||!i.exists)return;const l=i,{menuType:n,menuTheme:d}=t,s=(0,c.FB)(n);l.thumbnail=d===u.N.Dark?s.dark:s.light})({item:d,config:l}),n&&l.menuType!==n.menuType&&a(d,l,!0),n&&((e,i)=>{return e.slidesToDisplay.allSlidesSelected!==(null===i||void 0===i?void 0:i.slidesToDisplay.allSlidesSelected)||(t=e.slidesToDisplay.selectedSlides,l=null===i||void 0===i?void 0:i.slidesToDisplay.selectedSlides,t.length!==l.length||!t.every(((e,i)=>e===l[i])));var t,l})(l,n)&&((e,i,t,l)=>{e.item&&e.item.exists&&(function(e,i,t){const l=t.slidesToDisplay.selectedSlides.filter((e=>i.getSlides().find((i=>i.id===e))));l.length!==t.slidesToDisplay.selectedSlides.length&&e.mutateConfig((e=>{e.slidesToDisplay.selectedSlides=l}))}(e,i,t),function(e,i,t,l){const{item:n}=e,d=n;(t.slidesToDisplay.allSlidesSelected!==(null===l||void 0===l?void 0:l.slidesToDisplay.allSlidesSelected)||t.slidesToDisplay.selectedSlides!==(null===l||void 0===l?void 0:l.slidesToDisplay.selectedSlides))&&(d.excludedSlidesIds=function(e,i){if(e.slidesToDisplay.allSlidesSelected)return[];const t=i.getSlides(),l=e.slidesToDisplay.selectedSlides||[];return t.filter((e=>!l.includes(e.id))).map((e=>e.id))}(t,i),e.mutateConfig((e=>{e.slidesToDisplay.allSlidesSelected&&(e.slidesToDisplay.selectedSlides=[])})))}(e,i,t,l))})(i,t,l,n),d.showOverflow||(d.showOverflow=!0),d.isTransversal||(d.isTransversal=!0))})),(0,n.x)({getTargetNodeItem:()=>i.item,renderApp:()=>{var e,n;const{theme:s,t:o}=t,{item:r}=i,{menuItems:a,menuTheme:u,menuType:c}=i.getConfig();return(0,l.jsx)(d.q,{getItems:()=>(0,m.N)(a,o),menuType:c,theme:s,itemSize:{width:null!==(e=null===r||void 0===r?void 0:r.width)&&void 0!==e?e:0,height:null!==(n=null===r||void 0===r?void 0:r.height)&&void 0!==n?n:0},menuTheme:u})},nodePrefix:"menu"})({script:i,editor:t})}},93918:(e,i,t)=>{t.d(i,{N:()=>d,e:()=>o});var l=t(48237);const n=(e,i)=>""===e?i("__new.view.widget.menu.sidebar.emptyTitlePlaceholder"):e,d=(e,i)=>e.map(((e,t)=>{var d;const s=(null===(d=e.menuItemAction.action)||void 0===d?void 0:d.type)===l.L.GoToSlide;return{text:n(e.menuItemName,i),key:t,onClick:()=>{},isLink:s,isActive:!1,isAllowed:s,altText:e.altText}})),s={active:!1,allowed:!1},o=(e,i)=>e.map(((e,t)=>{var d,o;const r=!!(null===(d=e.menuItemAction)||void 0===d?void 0:d.data)&&(null===(a=e.menuItemAction.data)||void 0===a?void 0:a.type)===l.L.GoToSlide;var a;const{active:u,allowed:c}=r&&(null===(o=e.menuItemAction)||void 0===o?void 0:o.data)?i.getGoToSlideState(e.menuItemAction.data):s;return{text:n(e.menuItemName,i.t),key:t,onClick:()=>{var i;return null===(i=e.menuItemAction)||void 0===i?void 0:i.run()},isLink:r,isActive:u,isAllowed:c,altText:e.altText}}))},57277:(e,i,t)=>{t.d(i,{x:()=>n});var l=t(70377);function n(e){let{getTargetNodeItem:i,renderApp:t,renderThumbnailApp:n,nodePrefix:d}=e;return e=>{let{script:s,editor:o}=e,r=null,a=[];function u(e){r&&(l.unmountComponentAtNode(r),r=null),e&&"innerHtml"in e&&(e.innerHtml='<div class="card-iframe"><div style="width: 100%; height: 100%; background: #FF0000; color: #FFFFFF;">Deleted</div><script><\/script></div>')}function c(){r&&l.render(t(),r)}function m(){const e=i(s.getConfig());if(!e)return;const t=`${d}-${e.id}`;"innerHtml"in e&&(e.innerHtml=`<div class="card-iframe"><div id="${t}" class="genially-widget-app" style="width: 100%; height: 100%;"></div></div>`),requestAnimationFrame((()=>{r="idOfFreeNode"in e?document.getElementById(e.idOfFreeNode)||null:document.getElementById(t)||null,c()}))}function v(){n&&a.length&&a.forEach((e=>{l.render(n(),e)}))}function g(){const e=i(s.getConfig());e&&"idOfThumbnailFreeNode"in e&&requestAnimationFrame((()=>{const i=document.getElementsByClassName(e.idOfThumbnailFreeNode);a=Array.from(i),v()}))}s.on("configChange",(e=>{let{config:t,prevConfig:l}=e;const n=i(t),d=l?i(l):void 0;d&&d!==n&&u(d),n&&(n!==d?(m(),g()):(c(),v()))})),s.on("dispose",(()=>{u(i(s.getConfig()))})),o.on("itemMount",(e=>{let{item:i}=e;i===s.item&&m()})),o.on("itemUnmount",(e=>{let{item:i}=e;i===s.item&&u()})),o.on("itemThumbnailMount",(e=>{let{item:i}=e;i===s.item&&g()}))}}}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/4720.8093f4c1.chunk.js.map